"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[372],{4873:function(e,t,s){var a=s(1076);t.Z=new class{async getAll(){return await a.Z.get("https://backend.umom.pro/categories/get/all")}async createOrg(e){return await a.Z.put("https://backend.umom.pro/categories/create",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})}}},4241:function(e,t,s){var a=s(1076);t.Z=new class{async getById(e){return await a.Z.post("https://backend.umom.pro/dishes/get/by/category",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})}async getByDishId(e){return await a.Z.post("https://backend.umom.pro/dishes/get/by/id",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})}async getAll(){return await a.Z.get("https://backend.umom.pro/dishes/get/all")}async createDish(e){return await a.Z.put("https://backend.umom.pro/dishes/create",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})}async deleteDish(e){return await a.Z.delete("https://backend.umom.pro/dishes/delete",{headers:{"Content-Type":"application/json"},data:JSON.stringify(e)})}async editDish(e){return await a.Z.patch("https://backend.umom.pro/dishes/update",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})}}},7990:function(e,t,s){var a=s(1020);t.Z=(0,a.Q_)("order-dish-orgs",{state:()=>({items:{}}),actions:{addOrders(e){this.items=e}},persist:!0})},4796:function(e,t,s){s.d(t,{Z:function(){return h}});var a=s(3396);const r={class:"list"},i={class:"img__wrapper"},o=["src"],n=["onClick"];function d(e,t,s,d,l,p){const u=(0,a.up)("font-awesome-icon"),c=(0,a.up)("router-link"),h=(0,a.up)("DataTable");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(h,{class:"table",headers:s.headers,items:s.items,"sort-by":e.sortBy,"sort-type":e.sortType,onClickRow:p.show,"table-class-name":"customize-table",alternating:""},{"item-photo":(0,a.w5)((({photo_id:t})=>[(0,a._)("div",i,[(0,a._)("img",{src:e.src+t},null,8,o)])])),"item-del":(0,a.w5)((({id:e})=>[(0,a.Wm)(c,{to:{name:"editDish",params:{id:e}}},{default:(0,a.w5)((()=>[(0,a._)("button",null,[(0,a.Wm)(u,{icon:["fas","pen-to-square"]})])])),_:2},1032,["to"]),(0,a._)("button",{onClick:t=>p.del(e)},[(0,a.Wm)(u,{icon:["fas","trash"]})],8,n)])),_:1},8,["headers","items","sort-by","sort-type","onClickRow"])])}s(560);var l=s(4241),p={data:()=>({src:"https://backend.umom.pro/photos/download?id=",sortType:"asc",sortBy:"title"}),props:["headers","items","pushName","url","idless"],methods:{show(e){this.pushName&&(this.idless?this.$router.push({name:this.pushName}):this.$router.push({name:this.pushName,params:{id:e.id}}))},async del(e){await l.Z.deleteDish({id:e}),location.reload()}}},u=s(89);const c=(0,u.Z)(p,[["render",d],["__scopeId","data-v-370ddd9e"]]);var h=c},7863:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var a=s(3396);function r(e,t,s,r,i,o){const n=(0,a.up)("BaseTitle"),d=(0,a.up)("DataList"),l=(0,a.up)("router-link"),p=(0,a.up)("MainLayout");return(0,a.wg)(),(0,a.j4)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Категории")])),_:1}),(0,a.Wm)(d,{headers:e.headersCategory,items:e.itemsCategory,"push-name":"dishes"},null,8,["headers","items"]),(0,a.Wm)(l,{class:"link",to:{name:"createCategory",params:{id:e.id}}},{default:(0,a.w5)((()=>[(0,a.Uk)("+")])),_:1},8,["to"]),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Заказы")])),_:1}),(0,a.Wm)(d,{headers:e.headersOrders,items:e.itemsOrders,idless:!0,"push-name":"order"},null,8,["headers","items"])])),_:1})}s(560);var i=s(2252),o=s(4796),n=s(4787),d=s(4873),l=s(6551),p=s(1076),u=new class{async getAllByOrg(e){return await p.Z.post("https://backend.umom.pro/order/get/by/organization",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})}},c=s(7990),h={components:{BaseLink:l.Z,MainLayout:i.Z,DataList:o.Z,BaseTitle:n.Z},data:()=>({store:(0,c.Z)(),headersCategory:[{text:"Название",value:"title"},{text:"Описание",value:"description"}],headersOrders:[{text:"Доставка",value:"delivery"},{text:"Этаж",value:"floor"},{text:"Место",value:"workstation"},{text:"Статус",value:"is_completed"}],itemsCategory:[],itemsOrders:[],id:null}),methods:{async getData(){return await d.Z.getAll()},async getOrders(){return console.log({organization_id:this.$route.params.id}),await u.getAllByOrg({organization_id:this.$route.params.id})},getId(){this.id=this.$route.params.id}},async mounted(){await this.getData().then((e=>this.itemsCategory=e.data)),await this.getOrders().then((e=>{this.itemsOrders=e.data;let t=[],s=0;for(let a of this.itemsOrders){a.id=s++,t.push(a.dishes),a.delivery?a.delivery="Доставить":a.delivery="Самовывоз",a.is_completed?a.is_completed="Готово":a.is_completed="Не готово";for(let e of Object.keys(a.user))"id"!==e&&(a[e]=a.user[e])}this.store.addOrders(t),console.log(t)})).catch((e=>console.log(e))),this.getId()}},m=s(89);const y=(0,m.Z)(h,[["render",r],["__scopeId","data-v-a3d3156e"]]);var g=y}}]);
//# sourceMappingURL=372.933026f4.js.map