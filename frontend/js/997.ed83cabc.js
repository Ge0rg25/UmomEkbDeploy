"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[997],{1160:function(t,e,a){a.d(e,{z:function(){return o}});const o=t=>{const e=t.target.files[0],a=new FormData;return a.append("photo",e),a}},4241:function(t,e,a){var o=a(1076);e.Z=new class{async getById(t){return await o.Z.post("https://backend.umom.pro/dishes/get/by/category",JSON.stringify(t),{headers:{"Content-Type":"application/json"}})}async getByDishId(t){return await o.Z.post("https://backend.umom.pro/dishes/get/by/id",JSON.stringify(t),{headers:{"Content-Type":"application/json"}})}async getAll(){return await o.Z.get("https://backend.umom.pro/dishes/get/all")}async createDish(t){return await o.Z.put("https://backend.umom.pro/dishes/create",JSON.stringify(t),{headers:{"Content-Type":"application/json"}})}async deleteDish(t){return await o.Z.delete("https://backend.umom.pro/dishes/delete",{headers:{"Content-Type":"application/json"},data:JSON.stringify(t)})}async editDish(t){return await o.Z.patch("https://backend.umom.pro/dishes/update",JSON.stringify(t),{headers:{"Content-Type":"application/json"}})}}},1511:function(t,e,a){function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){if("object"!==o(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function r(t){var e=n(t,"string");return"symbol"===o(e)?e:String(e)}function i(t,e,a){return e=r(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,{Z:function(){return l}});var s=a(1076),l=new class{constructor(){i(this,"async",void 0)}async uploadPhoto(t){return await s.Z.post("https://backend.umom.pro/photos/upload",t,{headers:{"Content-Type":"multipart/form-data"}})}}},444:function(t,e,a){a.d(e,{Z:function(){return l}});var o=a(3396);function n(t,e){return(0,o.wg)(),(0,o.iD)("button",null,[(0,o.WI)(t.$slots,"default",{},void 0,!0)])}var r=a(89);const i={},s=(0,r.Z)(i,[["render",n],["__scopeId","data-v-32169d61"]]);var l=s},8731:function(t,e,a){a.d(e,{Z:function(){return u}});var o=a(3396);const n={class:"form"};function r(t,e){return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.WI)(t.$slots,"default",{},void 0,!0)])}var i=a(89);const s={},l=(0,i.Z)(s,[["render",r],["__scopeId","data-v-eb5f1c9c"]]);var u=l},6020:function(t,e,a){a.d(e,{Z:function(){return l}});var o=a(3396);const n=["type","value","placeholder"];var r={__name:"BaseInput",props:["type","value","placeholder"],emits:["update:value"],setup(t,{emit:e}){const a=e,r=t=>{a("update:value",t.target.value)};return(e,a)=>((0,o.wg)(),(0,o.iD)("input",{type:t.type,value:t.value,onInput:r,placeholder:t.placeholder},null,40,n))}},i=a(89);const s=(0,i.Z)(r,[["__scopeId","data-v-32febc6f"]]);var l=s},9567:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var o=a(3396);const n=t=>((0,o.dD)("data-v-85e235f0"),t=t(),(0,o.Cn)(),t),r={class:"photo"},i=n((()=>(0,o._)("label",{for:"photo"},"Фото",-1)));function s(t,e,a,n,s,l){const u=(0,o.up)("BaseTitle"),p=(0,o.up)("BaseInput"),c=(0,o.up)("BaseButton"),d=(0,o.up)("BaseForm"),h=(0,o.up)("MainLayout");return(0,o.wg)(),(0,o.j4)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Редактировать")])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{type:"text",placeholder:"Название",value:t.title,"onUpdate:value":e[0]||(e[0]=e=>t.title=e)},null,8,["value"]),(0,o.Wm)(p,{type:"text",placeholder:"Описание",value:t.description,"onUpdate:value":e[1]||(e[1]=e=>t.description=e)},null,8,["value"]),(0,o.Wm)(p,{type:"number",placeholder:"Стоимость",value:t.price,"onUpdate:value":e[2]||(e[2]=e=>t.price=e)},null,8,["value"]),(0,o.Wm)(p,{type:"number",placeholder:"Калории",value:t.calories,"onUpdate:value":e[3]||(e[3]=e=>t.calories=e)},null,8,["value"]),(0,o.Wm)(p,{type:"number",placeholder:"Белки",value:t.proteins,"onUpdate:value":e[4]||(e[4]=e=>t.proteins=e)},null,8,["value"]),(0,o.Wm)(p,{type:"number",placeholder:"Жиры",value:t.fats,"onUpdate:value":e[5]||(e[5]=e=>t.fats=e)},null,8,["value"]),(0,o.Wm)(p,{type:"number",placeholder:"Углеводы",value:t.carbohydrates,"onUpdate:value":e[6]||(e[6]=e=>t.carbohydrates=e)},null,8,["value"]),(0,o._)("div",r,[i,(0,o.Wm)(p,{type:"file",id:"photo",onChange:t.getPhoto},null,8,["onChange"])]),(0,o.Wm)(c,{onClick:t.uploadPhoto,class:"btn"},{default:(0,o.w5)((()=>[(0,o.Uk)("Редактировать")])),_:1},8,["onClick"])])),_:1})])),_:1})}a(560);var l=a(8800),u=a(6020),p=a(444),c=a(8731),d=a(1160),h=a(1511),y=a(4241),f=(0,o.aZ)({components:{BaseForm:c.Z,BaseButton:p.Z,BaseInput:u.Z,MainLayout:l.Z},data:()=>({previousData:null,title:"",description:"",price:null,calories:null,proteins:null,fats:null,carbohydrates:null,categoryId:null,photoId:null,photoFormData:null}),methods:{async getPreviousData(){await y.Z.getByDishId({id:this.$route.params.id}).then((t=>{this.title=t.data.title,this.description=t.data.description,this.price=t.data.price,this.proteins=t.data.proteins,this.fats=t.data.fats,this.carbohydrates=t.data.carbohydrates,this.categoryId=t.data.category_id,this.photoId=t.data.photo_id,console.log(t.data)})).catch((t=>console.log(t)))},getPhoto(t){this.photoFormData=(0,d.z)(t),console.log(this.photoFormData)},async uploadPhoto(){this.photoFormData?await h.Z.uploadPhoto(this.photoFormData).then((async t=>{this.photoId=t.data.file_id,await this.editDish()})):await this.editDish()},async editDish(){const t={id:this.$route.params.id,title:this.title,description:this.description,category_id:this.$route.params.id,photo_id:this.photoId,price:this.price,calories:this.calories,proteins:this.proteins,fats:this.fats,carbohydrates:this.carbohydrates};await y.Z.editDish(t).then((()=>{alert("Блюдо успешно отредактировано!"),this.$router.push({name:"orgsById"})})).catch((t=>alert("Что-то пошло не так(: \n"+t)))}},async mounted(){await this.getPreviousData()}}),m=a(89);const v=(0,m.Z)(f,[["render",s],["__scopeId","data-v-85e235f0"]]);var b=v}}]);
//# sourceMappingURL=997.ed83cabc.js.map