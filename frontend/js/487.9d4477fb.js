"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[487],{1160:function(t,e,a){a.d(e,{z:function(){return o}});const o=t=>{const e=t.target.files[0],a=new FormData;return a.append("photo",e),a}},4241:function(t,e,a){var o=a(1076);e.Z=new class{async getById(t){return await o.Z.post("https://backend.umom.pro/dishes/get/by/category",JSON.stringify(t),{headers:{"Content-Type":"application/json"}})}async getAll(){return await o.Z.get("https://backend.umom.pro/dishes/get/all")}async createDish(t){return await o.Z.put("https://backend.umom.pro/dishes/create",JSON.stringify(t),{headers:{"Content-Type":"application/json"}})}}},1511:function(t,e,a){function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){if("object"!==o(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function r(t){var e=n(t,"string");return"symbol"===o(e)?e:String(e)}function l(t,e,a){return e=r(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,{Z:function(){return i}});var u=a(1076),i=new class{constructor(){l(this,"async",void 0)}async uploadPhoto(t){return await u.Z.post("https://backend.umom.pro/photos/upload",t,{headers:{"Content-Type":"multipart/form-data"}})}}},444:function(t,e,a){a.d(e,{Z:function(){return i}});var o=a(3396);function n(t,e){return(0,o.wg)(),(0,o.iD)("button",null,[(0,o.WI)(t.$slots,"default",{},void 0,!0)])}var r=a(89);const l={},u=(0,r.Z)(l,[["render",n],["__scopeId","data-v-32169d61"]]);var i=u},8731:function(t,e,a){a.d(e,{Z:function(){return s}});var o=a(3396);const n={class:"form"};function r(t,e){return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.WI)(t.$slots,"default",{},void 0,!0)])}var l=a(89);const u={},i=(0,l.Z)(u,[["render",r],["__scopeId","data-v-eb5f1c9c"]]);var s=i},6020:function(t,e,a){a.d(e,{Z:function(){return i}});var o=a(3396);const n=["type","value","placeholder"];var r={__name:"BaseInput",props:["type","value","placeholder"],emits:["update:value"],setup(t,{emit:e}){const a=e,r=t=>{a("update:value",t.target.value)};return(e,a)=>((0,o.wg)(),(0,o.iD)("input",{type:t.type,value:t.value,onInput:r,placeholder:t.placeholder},null,40,n))}},l=a(89);const u=(0,l.Z)(r,[["__scopeId","data-v-32febc6f"]]);var i=u},9310:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var o=a(3396);const n=t=>((0,o.dD)("data-v-3e58c14e"),t=t(),(0,o.Cn)(),t),r={class:"photo"},l=n((()=>(0,o._)("label",{for:"photo"},"Фото",-1)));function u(t,e,a,n,u,i){const s=(0,o.up)("BaseTitle"),p=(0,o.up)("BaseInput"),c=(0,o.up)("BaseButton"),d=(0,o.up)("BaseForm"),h=(0,o.up)("MainLayout");return(0,o.wg)(),(0,o.j4)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Создать блюдо")])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{type:"text",placeholder:"Название",value:t.title,"onUpdate:value":e[0]||(e[0]=e=>t.title=e)},null,8,["value"]),(0,o.Wm)(p,{type:"text",placeholder:"Описание",value:t.description,"onUpdate:value":e[1]||(e[1]=e=>t.description=e)},null,8,["value"]),(0,o.Wm)(p,{type:"number",placeholder:"Стоимость",value:t.price,"onUpdate:value":e[2]||(e[2]=e=>t.price=e)},null,8,["value"]),(0,o.Wm)(p,{type:"number",placeholder:"Калории",value:t.calories,"onUpdate:value":e[3]||(e[3]=e=>t.calories=e)},null,8,["value"]),(0,o.Wm)(p,{type:"number",placeholder:"Белки",value:t.proteins,"onUpdate:value":e[4]||(e[4]=e=>t.proteins=e)},null,8,["value"]),(0,o.Wm)(p,{type:"number",placeholder:"Жиры",value:t.fats,"onUpdate:value":e[5]||(e[5]=e=>t.fats=e)},null,8,["value"]),(0,o.Wm)(p,{type:"number",placeholder:"Углеводы",value:t.carbohydrates,"onUpdate:value":e[6]||(e[6]=e=>t.carbohydrates=e)},null,8,["value"]),(0,o._)("div",r,[l,(0,o.Wm)(p,{type:"file",id:"photo",onChange:t.getPhoto},null,8,["onChange"])]),(0,o.Wm)(c,{onClick:t.uploadPhoto,class:"btn"},{default:(0,o.w5)((()=>[(0,o.Uk)("Создать")])),_:1},8,["onClick"])])),_:1})])),_:1})}a(560);var i=a(8800),s=a(6020),p=a(444),c=a(8731),d=a(1160),h=a(1511),v=a(4241),f=(0,o.aZ)({components:{BaseForm:c.Z,BaseButton:p.Z,BaseInput:s.Z,MainLayout:i.Z},data:()=>({title:"",description:"",price:null,calories:null,proteins:null,fats:null,carbohydrates:null,categoryId:null,photoId:null,photoFormData:null}),methods:{getPhoto(t){this.photoFormData=(0,d.z)(t),console.log(this.photoFormData)},async uploadPhoto(){this.photoFormData&&await h.Z.uploadPhoto(this.photoFormData).then((async t=>{this.photoId=t.data.file_id,await this.createDish()}))},async createDish(){const t={title:this.title,description:this.description,category_id:this.$route.params.id,photo_id:this.photoId,calories:this.calories,proteins:this.proteins,fats:this.fats,carbohydrates:this.carbohydrates};await v.Z.createDish(t).then((()=>{alert("Блюдо успешно создано!"),this.$router.push({name:"dishes"})})).catch((t=>alert("Что-то пошло не так(: \n"+t)))}}}),m=a(89);const y=(0,m.Z)(f,[["render",u],["__scopeId","data-v-3e58c14e"]]);var b=y}}]);
//# sourceMappingURL=487.9d4477fb.js.map